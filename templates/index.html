<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üé¨ Movie Success Predictor</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #07080d; --surface: #0d1018; --surface2: #12161f;
      --border: #1c2130; --accent: #f5c518; --accent2: #e87040;
      --hit: #22c55e; --avg: #f5c518; --flop: #ef4444;
      --text: #e8edf5; --muted: #4a5568; --muted2: #718096;
    }
    html { scroll-behavior: smooth; }
    body { background: var(--bg); color: var(--text); font-family: 'DM Mono', monospace; min-height: 100vh; overflow-x: hidden; }
    body::before {
      content: ''; position: fixed; inset: 0;
      background-image: linear-gradient(rgba(245,197,24,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(245,197,24,0.02) 1px, transparent 1px);
      background-size: 44px 44px; pointer-events: none; z-index: 0;
    }
    .orb { position: fixed; border-radius: 50%; filter: blur(130px); pointer-events: none; z-index: 0; opacity: 0.18; }
    .orb-1 { width:600px; height:600px; background:#f5c518; top:-200px; right:-200px; animation: drift 14s ease-in-out infinite alternate; }
    .orb-2 { width:400px; height:400px; background:#e87040; bottom:-100px; left:-150px; animation: drift 18s ease-in-out infinite alternate-reverse; }
    @keyframes drift { from { transform:translate(0,0); } to { transform:translate(50px,50px); } }
    @keyframes fadeUp { from { opacity:0; transform:translateY(18px); } to { opacity:1; transform:translateY(0); } }
    @keyframes spin { to { transform:rotate(360deg); } }
    @keyframes pulse { 0%,100% { opacity:1; transform:scale(1); } 50% { opacity:0.4; transform:scale(0.7); } }

    .container { position:relative; z-index:1; max-width:960px; margin:0 auto; padding:56px 24px 80px; }

    header { margin-bottom:52px; animation:fadeUp .7s ease both; }
    .badge {
      display:inline-flex; align-items:center; gap:8px;
      background:rgba(245,197,24,0.08); border:1px solid rgba(245,197,24,0.22);
      border-radius:100px; padding:6px 14px;
      font-size:11px; letter-spacing:.1em; text-transform:uppercase; color:var(--accent); margin-bottom:20px;
    }
    .badge .dot { width:7px; height:7px; background:var(--accent); border-radius:50%; animation:pulse 2s ease-in-out infinite; }
    h1 {
      font-family:'Syne',sans-serif; font-size:clamp(34px,6vw,60px); font-weight:800;
      line-height:1.05; letter-spacing:-.02em;
      background:linear-gradient(135deg,#fff 0%,#a0b4cc 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; margin-bottom:14px;
    }
    h1 span { background:linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .subtitle { color:var(--muted2); font-size:13px; line-height:1.7; max-width:520px; }

    .stats { display:flex; gap:1px; margin-bottom:44px; background:var(--border); border-radius:12px; overflow:hidden; animation:fadeUp .7s .1s ease both; }
    .stat { flex:1; background:var(--surface); padding:16px 18px; text-align:center; }
    .stat-value { font-family:'Syne',sans-serif; font-size:20px; font-weight:700; color:var(--accent); }
    .stat-label { font-size:9px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted); margin-top:4px; }

    .section-title {
      font-family:'Syne',sans-serif; font-size:11px; font-weight:600;
      letter-spacing:.1em; text-transform:uppercase; color:var(--muted2);
      margin-bottom:14px; display:flex; align-items:center; gap:8px;
    }
    .section-title::before { content:''; display:block; width:3px; height:13px; background:var(--accent); border-radius:2px; }

    /* Examples */
    .examples-row { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:32px; animation:fadeUp .7s .15s ease both; }
    .example-card {
      background:var(--surface); border:1px solid var(--border);
      border-radius:14px; padding:18px 16px; cursor:pointer;
      transition:border-color .25s, transform .2s, box-shadow .2s;
      position:relative; overflow:hidden;
    }
    .example-card::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,rgba(245,197,24,0.05),transparent); opacity:0; transition:opacity .25s; }
    .example-card:hover { border-color:rgba(245,197,24,0.35); transform:translateY(-2px); box-shadow:0 8px 24px rgba(0,0,0,0.4); }
    .example-card:hover::before { opacity:1; }
    .ex-icon { font-size:24px; margin-bottom:10px; }
    .ex-title { font-family:'Syne',sans-serif; font-size:13px; font-weight:700; color:var(--text); margin-bottom:4px; }
    .ex-desc { font-size:10px; color:var(--muted2); line-height:1.5; margin-bottom:10px; }
    .ex-tag { display:inline-block; font-size:9px; font-weight:600; letter-spacing:.07em; text-transform:uppercase; padding:3px 9px; border-radius:100px; }
    .tag-hit { background:rgba(34,197,94,.15); color:var(--hit); border:1px solid rgba(34,197,94,.25); }
    .tag-avg { background:rgba(245,197,24,.15); color:var(--avg); border:1px solid rgba(245,197,24,.25); }
    .tag-flop { background:rgba(239,68,68,.15); color:var(--flop); border:1px solid rgba(239,68,68,.25); }
    .ex-fill-btn {
      position:absolute; top:12px; right:12px;
      background:rgba(245,197,24,0.1); border:1px solid rgba(245,197,24,0.2);
      border-radius:6px; padding:3px 8px; font-size:9px; color:var(--accent);
      letter-spacing:.05em; text-transform:uppercase; cursor:pointer; transition:background .2s;
    }
    .ex-fill-btn:hover { background:rgba(245,197,24,0.2); }

    /* Card */
    .card { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:28px; margin-bottom:20px; animation:fadeUp .7s .2s ease both; transition:border-color .3s; }
    .card:hover { border-color:rgba(245,197,24,0.15); }

    /* Feature grid */
    .feature-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(165px,1fr)); gap:10px 12px; margin-bottom:8px; }
    .feature-wrap { display:flex; flex-direction:column; gap:5px; }
    .feature-label { font-size:9px; letter-spacing:.07em; text-transform:uppercase; color:var(--muted2); display:flex; align-items:center; gap:5px; }
    .feature-input, .feature-select {
      background:var(--bg); border:1px solid var(--border);
      border-radius:8px; padding:9px 10px;
      color:var(--text); font-family:'DM Mono',monospace; font-size:12px;
      width:100%; outline:none; transition:border-color .2s, box-shadow .2s; -webkit-appearance:none;
    }
    .feature-select { cursor:pointer; }
    .feature-input:focus, .feature-select:focus { border-color:var(--accent); box-shadow:0 0 0 3px rgba(245,197,24,0.1); }

    /* Buttons */
    .btn-row { display:flex; gap:10px; margin-top:24px; flex-wrap:wrap; }
    .btn { font-family:'Syne',sans-serif; font-size:13px; font-weight:600; letter-spacing:.03em; padding:12px 24px; border-radius:10px; border:none; cursor:pointer; transition:all .2s; display:inline-flex; align-items:center; gap:8px; }
    .btn-primary { background:var(--accent); color:#000; flex:1; justify-content:center; min-width:160px; }
    .btn-primary:hover { background:#ffd333; box-shadow:0 0 24px rgba(245,197,24,0.4); transform:translateY(-1px); }
    .btn-secondary { background:transparent; color:var(--muted2); border:1px solid var(--border); }
    .btn-secondary:hover { border-color:var(--accent2); color:var(--accent2); }
    .btn:disabled { opacity:.45; cursor:not-allowed; transform:none!important; box-shadow:none!important; }
    .spinner { width:15px; height:15px; border:2px solid rgba(0,0,0,.3); border-top-color:#000; border-radius:50%; animation:spin .7s linear infinite; display:none; }

    .error-msg { background:rgba(239,68,68,.08); border:1px solid rgba(239,68,68,.2); border-radius:10px; padding:12px 16px; color:#ef4444; font-size:12px; display:none; margin-top:14px; }

    /* Result */
    .result-card { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:28px; display:none; }
    .result-card.visible { display:block; animation:fadeUp .5s ease both; }
    .result-top { display:flex; align-items:center; gap:20px; margin-bottom:28px; }
    .result-badge { width:70px; height:70px; border-radius:16px; display:flex; align-items:center; justify-content:center; font-size:28px; flex-shrink:0; }
    .badge-hit { background:linear-gradient(135deg,#22c55e,#16a34a); box-shadow:0 0 28px rgba(34,197,94,0.3); }
    .badge-avg { background:linear-gradient(135deg,#f5c518,#d97706); box-shadow:0 0 28px rgba(245,197,24,0.3); }
    .badge-flop { background:linear-gradient(135deg,#ef4444,#b91c1c); box-shadow:0 0 28px rgba(239,68,68,0.3); }
    .result-meta .res-label { font-size:10px; letter-spacing:.1em; text-transform:uppercase; color:var(--muted2); margin-bottom:6px; }
    .result-classname { font-family:'Syne',sans-serif; font-size:30px; font-weight:800; }
    .classname-hit { color:var(--hit); } .classname-avg { color:var(--avg); } .classname-flop { color:var(--flop); }
    .prob-title { font-size:10px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted2); margin-bottom:14px; }
    .prob-bars { display:flex; flex-direction:column; gap:12px; }
    .prob-row { display:flex; align-items:center; gap:12px; }
    .prob-name { font-size:11px; color:var(--muted2); width:60px; flex-shrink:0; }
    .prob-bar-bg { flex:1; height:8px; background:var(--bg); border-radius:100px; overflow:hidden; }
    .prob-bar-fill { height:100%; border-radius:100px; transition:width .9s cubic-bezier(.16,1,.3,1); width:0%; }
    .fill-hit { background:linear-gradient(90deg,#22c55e,#86efac); }
    .fill-avg { background:linear-gradient(90deg,#f5c518,#fde68a); }
    .fill-flop { background:linear-gradient(90deg,#ef4444,#fca5a5); }
    .prob-pct { font-size:12px; font-weight:500; color:var(--text); width:44px; text-align:right; }

    @media(max-width:600px) {
      .examples-row { grid-template-columns:1fr; }
      .stats { flex-wrap:wrap; }
      .feature-grid { grid-template-columns:repeat(2,1fr); }
    }
  </style>
</head>
<body>

<div class="orb orb-1"></div>
<div class="orb orb-2"></div>

<div class="container">

  <header>
    <div class="badge"><span class="dot"></span> Random Forest Classifier</div>
    <h1>Movie <span>Success</span><br/>Predictor</h1>
    <p class="subtitle">Predict whether a movie will be a <strong>Hit</strong>, <strong>Average</strong>, or <strong>Flop</strong> based on 26 production & social features. Powered by a trained RFC model with 90.7% accuracy.</p>
  </header>

  <div class="stats">
    <div class="stat"><div class="stat-value">RFC</div><div class="stat-label">Model</div></div>
    <div class="stat"><div class="stat-value">26</div><div class="stat-label">Features</div></div>
    <div class="stat"><div class="stat-value">3</div><div class="stat-label">Classes</div></div>
    <div class="stat"><div class="stat-value">90.7%</div><div class="stat-label">Accuracy</div></div>
    <div class="stat"><div class="stat-value">5043</div><div class="stat-label">Trained On</div></div>
  </div>

  <!-- Example movies -->
  <div class="section-title">Quick Examples ‚Äî Click to Auto-Fill & Predict</div>
  <div class="examples-row">
    <div class="example-card" onclick="fillExample(0)">
      <div class="ex-fill-btn">Auto-fill ‚Üó</div>
      <div class="ex-icon">üèÜ</div>
      <div class="ex-title">Avatar (2009)</div>
      <div class="ex-desc">Mega-budget sci-fi blockbuster. $237M budget, $760M gross, 1.2M votes, 33K movie FB likes.</div>
      <span class="ex-tag tag-hit">Expected: Hit</span>
    </div>
    <div class="example-card" onclick="fillExample(1)">
      <div class="ex-fill-btn">Auto-fill ‚Üó</div>
      <div class="ex-icon">üé≠</div>
      <div class="ex-title">Mid-Budget Drama</div>
      <div class="ex-desc">Modest drama with decent reviews, limited social buzz, $8M budget, $12M gross.</div>
      <span class="ex-tag tag-avg">Expected: Average</span>
    </div>
    <div class="example-card" onclick="fillExample(2)">
      <div class="ex-fill-btn">Auto-fill ‚Üó</div>
      <div class="ex-icon">üíÄ</div>
      <div class="ex-title">Low-Budget Horror</div>
      <div class="ex-desc">Poorly received horror with minimal votes, no social presence, $1.2M budget, $900K gross.</div>
      <span class="ex-tag tag-flop">Expected: Flop</span>
    </div>
  </div>

  <!-- Input card -->
  <div class="card">
    <div class="section-title">26 Feature Inputs</div>
    <div class="feature-grid" id="featureGrid"></div>
    <div class="error-msg" id="errorMsg"></div>
    <div class="btn-row">
      <button class="btn btn-primary" id="predictBtn" onclick="runPredict()">
        <span class="spinner" id="spinner"></span>
        <span id="btnText">üé¨ Predict Movie Success</span>
      </button>
      <button class="btn btn-secondary" onclick="clearAll()">Clear All</button>
    </div>
  </div>

  <!-- Result card -->
  <div class="result-card" id="resultCard">
    <div class="section-title">Prediction Result</div>
    <div class="result-top">
      <div class="result-badge" id="resBadge">üé¨</div>
      <div class="result-meta">
        <div class="res-label">Predicted Outcome</div>
        <div class="result-classname" id="resClass">‚Äî</div>
      </div>
    </div>
    <div class="prob-title">Confidence per Class</div>
    <div class="prob-bars" id="probBars"></div>
  </div>

</div>

<script>
// ‚îÄ‚îÄ 26 Features (exact order after preprocessing in notebook) ‚îÄ‚îÄ
const FEATURES = [
  { key:'color',                     label:'Color',                    type:'select', options:[['Color','1'],['Black & White','0']] },
  { key:'num_critic_for_reviews',    label:'Critic Reviews',            type:'number', placeholder:'140',        hint:'Number of critical reviews on IMDB (e.g. 50‚Äì813)' },
  { key:'duration',                  label:'Duration (min)',              type:'number', placeholder:'107',        hint:'Movie duration in minutes (e.g. 60‚Äì511)' },
  { key:'director_facebook_likes',   label:'Director FB Likes',        type:'number', placeholder:'686',        hint:'Director Facebook page likes (e.g. 0‚Äì23000)' },
  { key:'actor_3_facebook_likes',    label:'Actor 3 FB Likes',         type:'number', placeholder:'645',        hint:'3rd actor Facebook likes (e.g. 0‚Äì23000)' },
  { key:'gross',                     label:'Gross Earnings ($)',        type:'number', placeholder:'48468412',   hint:'Box office gross in USD' },
  { key:'genre_type1',               label:'Genre Type 1',             type:'number', placeholder:'6',          hint:'Primary genre (label encoded 0‚Äì20)' },
  { key:'genre_type2',               label:'Genre Type 2',             type:'number', placeholder:'0',          hint:'Secondary genre (0 if none)' },
  { key:'genre_type3',               label:'Genre Type 3',             type:'number', placeholder:'7',          hint:'Tertiary genre (0 if none)' },
  { key:'genre_type4',               label:'Genre Type 4',             type:'number', placeholder:'0',          hint:'4th genre type (0 if none)' },
  { key:'genre_type5',               label:'Genre Type 5',             type:'number', placeholder:'0',          hint:'5th genre type (0 if none)' },
  { key:'genre_type6',               label:'Genre Type 6',             type:'number', placeholder:'0',          hint:'6th genre type (0 if none)' },
  { key:'genre_type7',               label:'Genre Type 7',             type:'number', placeholder:'0',          hint:'7th genre type (0 if none)' },
  { key:'genre_type8',               label:'Genre Type 8',             type:'number', placeholder:'0',          hint:'8th genre type (0 if none)' },
  { key:'num_voted_users',           label:'Voted Users',               type:'number', placeholder:'83668',      hint:'Number of IMDB votes (e.g. 5‚Äì1,689,764)' },
  { key:'cast_total_facebook_likes', label:'Cast Total FB Likes',      type:'number', placeholder:'9699',       hint:'Total Facebook likes of entire cast' },
  { key:'facenumber_in_poster',      label:'Faces in Poster',           type:'number', placeholder:'1',          hint:'Number of actor faces in movie poster (0‚Äì43)' },
  { key:'num_user_for_reviews',      label:'User Reviews',             type:'number', placeholder:'273',        hint:'Number of user reviews on IMDB (1‚Äì5060)' },
  { key:'language',                  label:'Language',                 type:'number', placeholder:'11',         hint:'Language label encoded (English‚âà11, 0‚Äì45)' },
  { key:'country',                   label:'Country',                  type:'number', placeholder:'62',         hint:'Country label encoded (USA‚âà62, 0‚Äì64)' },
  { key:'content_rating',            label:'Content Rating',           type:'number', placeholder:'7',          hint:'Content rating label encoded (R‚âà3, PG-13‚âà7, 0‚Äì17)' },
  { key:'budget',                    label:'Budget ($)',                type:'number', placeholder:'39752624',   hint:'Production budget in USD' },
  { key:'title_year',                label:'Release Year',             type:'number', placeholder:'2002',       hint:'Year of release (1916‚Äì2016)' },
  { key:'actor_2_facebook_likes',    label:'Actor 2 FB Likes',         type:'number', placeholder:'1652',       hint:'2nd actor Facebook likes (0‚Äì137000)' },
  { key:'aspect_ratio',              label:'Aspect Ratio',             type:'number', placeholder:'2.35',       hint:'Film aspect ratio (e.g. 1.33, 1.85, 2.35)' },
  { key:'movie_facebook_likes',      label:'Movie FB Likes',           type:'number', placeholder:'7526',       hint:'Movie Facebook page likes (0‚Äì349,000)' },
];

// ‚îÄ‚îÄ 3 Pre-filled examples ‚îÄ‚îÄ
const EXAMPLES = [
  // Avatar (2009) ‚Äî Hit
  {
    color:'1', num_critic_for_reviews:'723', duration:'178', director_facebook_likes:'0',
    actor_3_facebook_likes:'855', gross:'760505847', genre_type1:'0', genre_type2:'0',
    genre_type3:'7', genre_type4:'20', genre_type5:'0', genre_type6:'0', genre_type7:'0', genre_type8:'0',
    num_voted_users:'1200000', cast_total_facebook_likes:'4834', facenumber_in_poster:'0',
    num_user_for_reviews:'3054', language:'11', country:'62', content_rating:'7',
    budget:'237000000', title_year:'2009', actor_2_facebook_likes:'936', aspect_ratio:'1.78', movie_facebook_likes:'33000'
  },
  // Mid-budget Drama ‚Äî Average
  {
    color:'1', num_critic_for_reviews:'55', duration:'98', director_facebook_likes:'30',
    actor_3_facebook_likes:'120', gross:'12000000', genre_type1:'5', genre_type2:'0',
    genre_type3:'0', genre_type4:'0', genre_type5:'0', genre_type6:'0', genre_type7:'0', genre_type8:'0',
    num_voted_users:'18000', cast_total_facebook_likes:'1200', facenumber_in_poster:'1',
    num_user_for_reviews:'90', language:'11', country:'62', content_rating:'9',
    budget:'8000000', title_year:'2010', actor_2_facebook_likes:'400', aspect_ratio:'1.85', movie_facebook_likes:'500'
  },
  // Low-Budget Horror ‚Äî Flop
  {
    color:'1', num_critic_for_reviews:'12', duration:'84', director_facebook_likes:'5',
    actor_3_facebook_likes:'40', gross:'900000', genre_type1:'9', genre_type2:'0',
    genre_type3:'0', genre_type4:'0', genre_type5:'0', genre_type6:'0', genre_type7:'0', genre_type8:'0',
    num_voted_users:'3200', cast_total_facebook_likes:'300', facenumber_in_poster:'2',
    num_user_for_reviews:'25', language:'11', country:'62', content_rating:'3',
    budget:'1200000', title_year:'2004', actor_2_facebook_likes:'100', aspect_ratio:'1.85', movie_facebook_likes:'120'
  }
];

// ‚îÄ‚îÄ Build grid ‚îÄ‚îÄ
const grid = document.getElementById('featureGrid');
FEATURES.forEach(f => {
  const wrap = document.createElement('div');
  wrap.className = 'feature-wrap';
  if (f.type === 'select') {
    wrap.innerHTML = `
      <label class="feature-label">${f.icon} ${f.label}</label>
      <select class="feature-select" id="f_${f.key}">
        ${f.options.map(([l,v]) => `<option value="${v}">${l}</option>`).join('')}
      </select>`;
  } else {
    wrap.innerHTML = `
      <label class="feature-label">${f.icon} ${f.label}</label>
      <input class="feature-input" id="f_${f.key}" type="number" step="any" placeholder="${f.placeholder}" title="${f.hint}"/>`;
  }
  grid.appendChild(wrap);
});

function fillExample(idx) {
  const ex = EXAMPLES[idx];
  FEATURES.forEach(f => {
    const el = document.getElementById('f_' + f.key);
    if (el && ex[f.key] !== undefined) el.value = ex[f.key];
  });
  hideError();
  document.getElementById('resultCard').classList.remove('visible');
  document.querySelector('.card').scrollIntoView({ behavior:'smooth', block:'start' });
}

function clearAll() {
  FEATURES.forEach(f => { const el = document.getElementById('f_' + f.key); if (el) el.value = ''; });
  document.getElementById('resultCard').classList.remove('visible');
  hideError();
}

function showError(msg) { const e = document.getElementById('errorMsg'); e.textContent = msg; e.style.display = 'block'; }
function hideError() { document.getElementById('errorMsg').style.display = 'none'; }
function setLoading(on) {
  document.getElementById('spinner').style.display = on ? 'block' : 'none';
  document.getElementById('btnText').textContent = on ? 'Predicting...' : 'üé¨ Predict Movie Success';
  document.getElementById('predictBtn').disabled = on;
}

async function runPredict() {
  hideError();
  const features = [];
  const missing = [];
  FEATURES.forEach(f => {
    const el = document.getElementById('f_' + f.key);
    const v = el ? el.value : '';
    if (v === '') { missing.push(f.label); features.push(0); }
    else features.push(parseFloat(v));
  });
  if (missing.length > 0) {
    showError(`Please fill all fields. Missing: ${missing.slice(0,4).join(', ')}${missing.length > 4 ? ` and ${missing.length-4} more...` : ''}`);
    return;
  }
  setLoading(true);
  try {
    const res = await fetch('/predict', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ features })
    });
    const data = await res.json();
    if (data.error) { showError('Server error: ' + data.error); setLoading(false); return; }
    renderResult(data);
  } catch(err) {
    showError('Cannot connect to Flask server. Make sure app.py is running on localhost:5000.');
  }
  setLoading(false);
}

const CLASS_CONFIG = {
  'Hit':     { badgeClass:'badge-hit',  nameClass:'classname-hit',  fillClass:'fill-hit' },
  'Average': { badgeClass:'badge-avg',  nameClass:'classname-avg',  fillClass:'fill-avg' },
  'Flop':    { badgeClass:'badge-flop', nameClass:'classname-flop', fillClass:'fill-flop' },
};

function renderResult(data) {
  const cls = data.predicted_class;
  const cfg = CLASS_CONFIG[cls] || { icon:'üé¨', badgeClass:'badge-avg', nameClass:'', fillClass:'' };

  const badge = document.getElementById('resBadge');
  badge.textContent = cfg.icon;
  badge.className = 'result-badge ' + cfg.badgeClass;

  const nameEl = document.getElementById('resClass');
  nameEl.textContent = cls;
  nameEl.className = 'result-classname ' + cfg.nameClass;

  const probBars = document.getElementById('probBars');
  probBars.innerHTML = '';
  Object.entries(data.probabilities).forEach(([label, prob]) => {
    const pct = (prob * 100).toFixed(1);
    const fillCls = (CLASS_CONFIG[label] || {}).fillClass || 'fill-avg';
    const row = document.createElement('div');
    row.className = 'prob-row';
    row.innerHTML = `
      <span class="prob-name">${label}</span>
      <div class="prob-bar-bg"><div class="prob-bar-fill ${fillCls}" id="bar_${label}" style="width:0%"></div></div>
      <span class="prob-pct">${pct}%</span>`;
    probBars.appendChild(row);
  });

  document.getElementById('resultCard').classList.add('visible');
  document.getElementById('resultCard').scrollIntoView({ behavior:'smooth', block:'start' });

  requestAnimationFrame(() => {
    Object.entries(data.probabilities).forEach(([label, prob], i) => {
      setTimeout(() => {
        const bar = document.getElementById('bar_' + label);
        if (bar) bar.style.width = (prob * 100) + '%';
      }, i * 120);
    });
  });
}
</script>
</body>
</html>